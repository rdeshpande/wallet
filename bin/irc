#!/usr/bin/env ruby

# Wrapper to open up irssi public/private config and then launch irssi

PRIVATE_PATH = File.join(ENV['HOME'], '.irssi.private')
PUBLIC_PATH = File.join(ENV['HOME'], '.irssi', 'config')
MERGED_CONFIG_PATH = '/tmp/irssi_config'

File.open(MERGED_CONFIG_PATH, 'w') do |f|
  f.write(File.read(PUBLIC_PATH))
  if File.file?(PRIVATE_PATH)
    f.write(File.read(PRIVATE_PATH))
  else
    puts "WARNING: Could not find private irssi config at #{PRIVATE_PATH}"
  end
end

%x("irssi --config #{MERGED_CONFIG_PATH}")
